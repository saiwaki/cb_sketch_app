(this["webpackJsonpsketch-mirror-web"]=this["webpackJsonpsketch-mirror-web"]||[]).push([[0],{123:function(t,e,n){t.exports=n.p+"static/media/artboard.ca47a092.svg"},124:function(t,e,n){t.exports=n.p+"static/media/warning.a2fb0bb8.svg"},131:function(t,e,n){t.exports=n(242)},132:function(t,e,n){"undefined"===typeof Promise&&(n(133).enable(),window.Promise=n(135)),n(136),Object.assign=n(48)},242:function(t,e,n){"use strict";n.r(e);n(132);var r=n(0),o=n.n(r),i=n(52),a=n.n(i),c=n(13),s=n(127),u=n(11);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l,d,f,h=n(19),b=n(114),p=n(115),m=n.n(p),v=n(116),g=n(5),O=n(16),y=n(246),w=Object(y.a)((l={},Object(g.a)(l,"CONNECTION_SUCCESS",(function(t,e){var n=e.payload;return Object(O.a)({},t,{connected:!0,token:n.token})})),Object(g.a)(l,"CONNECTION_CLOSED",(function(t){return Object(O.a)({},{connected:!1,token:null,manifestLoaded:!1})})),Object(g.a)(l,"UPDATE_MANIFEST",(function(t){return Object(O.a)({},t,{manifestLoaded:!0})})),l),{connected:!1,token:null,manifestLoaded:!1}),k=function(t){return function(e,n){e(Object(u.e)({pathname:"/".concat(t),state:{transitionType:"none",canGoBack:!1}}))}},E=Object(y.a)(Object(g.a)({},"UPDATE_MANIFEST",(function(t,e){return{byId:e.payload.entities.artboards}})),{byId:{}}),S=Object(y.a)(Object(g.a)({},"UPDATE_MANIFEST",(function(t,e){return{byId:e.payload.entities.documents}})),{byId:{}}),j=Object(y.a)(Object(g.a)({},"UPDATE_MANIFEST",(function(t,e){return{byId:e.payload.entities.pages}})),{byId:{}}),A=Object(y.a)(Object(g.a)({},"UPDATE_MANIFEST",(function(t,e){return{byId:e.payload.entities.layers}})),{byId:{}}),R=Object(h.combineReducers)({artboards:E,documents:S,pages:j,layers:A}),C=n(1),T=C.q(C.s(Number),C.r,C.f(0)),I=C.j((function(t,e){return C.E(C.x(["artboards",t]),T,e)})),x=Object(y.a)((d={},Object(g.a)(d,"UPDATE_MANIFEST",(function(t,e){var n=C.u(e.payload.entities.artboards);return C.M(C.m(I),t,n)})),Object(g.a)(d,"INCREASE_ARTBOARD_REVISION",(function(t,e){var n=e.payload;return I(n,t)})),d),{artboards:{}}),D=Object(y.a)((f={},Object(g.a)(f,"SET_SCROLLBAR_DIMENSIONS",(function(t,e){var n=e.payload;return C.N(C.y("scrollbarDimensions"),n,t)})),Object(g.a)(f,u.b,(function(t,e){var n=e.payload;return n&&n.state&&!1===n.state.canGoBack?C.N(C.y("canGoBack"),!1,t):C.N(C.y("canGoBack"),!0,t)})),f),{scrollbarDimensions:null,canGoBack:!1}),N=Object(y.a)(Object(g.a)({},"UPDATE_MANIFEST",(function(t,e){return{color:C.G(null,["payload","entities","documents",e.payload.result,"flowColor"],e)}})),{color:null}),L=Object(y.a)(Object(g.a)({},"UPDATE_MANIFEST",(function(t,e){e.payload;return Object(O.a)({},t,{manifestIsSet:!0})})),{manifestIsSet:!1}),P=Object(h.combineReducers)({connection:w,entities:R,router:u.g,revisions:x,screen:D,hitAreas:N,manifest:L}),M=Object(v.composeWithDevTools)({});var B=n(3),W=n(4),H=n(7),_=n(6),F=n(8),U=n(2),z=n.n(U),G={OPEN:"open",CLOSE:"close",MESSAGE:"message",ERROR:"error"},V=function(){function t(e){var n=this;Object(B.a)(this,t),this.onClose=function(t){n.broadcast(t)},this.onOpen=function(t){n.broadcast(t)},this.onError=function(t){n.broadcast(t)},this.onMessage=function(t){n.broadcast(t)},this.send=function(t){if(n.socket&&n.socket.readyState===window.WebSocket.OPEN)try{n.socket.send(t)}catch(e){console.warn("Couldn't send message")}},this.uri=e,this.listeners=[],this.sockets=[],this.connect=this.connect.bind(this),this.close=this.close.bind(this)}return Object(W.a)(t,[{key:"subscribe",value:function(t){if(this.listeners.push(t),this.socket&&this.socket instanceof window.WebSocket)switch(this.socket.readyState){case window.WebSocket.OPEN:t({type:G.OPEN});break;case window.WebSocket.CLOSED:t({type:G.CLOSE})}}},{key:"unsubscribe",value:function(t){this.listeners.indexOf(t)>-1&&this.listeners.splice(this.listeners.indexOf(t),1)}},{key:"broadcast",value:function(t){this.listeners.forEach((function(e){e(t)}))}},{key:"close",value:function(){if(this.socket&&this.socket instanceof window.WebSocket)try{this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("error",this.onError),this.socket.removeEventListener("message",this.onMessage),this.socket.close()}catch(t){console.warn("Could not close connection",t)}}},{key:"connect",value:function(){this.uri?(this.close(),this.socket=new window.WebSocket(this.uri),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("error",this.onError),this.socket.addEventListener("message",this.onMessage),this.socket.onclose=function(){}):console.warn("Can't set up connection because no URI was provided")}},{key:"socket",set:function(t){this.sockets.push(t)},get:function(){return Object(C.v)(this.sockets)}}]),t}(),K=function(t){function e(t){var n;return Object(B.a)(this,e),(n=Object(H.a)(this,Object(_.a)(e).call(this,t))).socketDispatcher=new V(t.uri),n}return Object(F.a)(e,t),Object(W.a)(e,[{key:"getChildContext",value:function(){return{socketDispatcher:this.socketDispatcher}}},{key:"componentDidMount",value:function(){this.socketDispatcher.connect()}},{key:"componentWillUnmount",value:function(){this.socketDispatcher.close()}},{key:"componentWillReceiveProps",value:function(t){this.props.uri!==t.uri&&(this.socketDispatcher.uri=t.uri,this.socketDispatcher.connect())}},{key:"render",value:function(){return o.a.Children.only(this.props.children)}}]),e}(r.Component);K.childContextTypes={socketDispatcher:z.a.instanceOf(V).isRequired};var X=K,Y=n(21),q=n(77),J=n.n(q),Q=function(t){function e(t,n){var r;return Object(B.a)(this,e),(r=Object(H.a)(this,Object(_.a)(e).call(this,t,n))).socketListener=r.socketListener.bind(Object(Y.a)(r)),(t.event||t.handler)&&J()(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.keys(t);return C.d(C.l(!0),e.map((function(t){return n.includes(t)})))}(t,["event","handler"]),"[Subscribe] provide both event and handler props"),r}return Object(F.a)(e,t),Object(W.a)(e,[{key:"socketListener",value:function(t){var e=this.props,n=e.event,r=e.handler;if(t.type===G.MESSAGE&&r){var o;try{o=JSON.parse(t.data)}catch(i){console.error("[Subscribe] error while parsing socket event",i)}o&&n===o.type&&r(o)}t.type===G.MESSAGE&&this.props.onMessage&&this.props.onMessage(t),t.type===G.OPEN&&this.props.onOpen&&this.props.onOpen(t),t.type===G.CLOSE&&this.props.onClose&&this.props.onClose(t),t.type===G.ERROR&&this.props.onError&&this.props.onError(t)}},{key:"componentDidMount",value:function(){this.context.socketDispatcher.subscribe(this.socketListener)}},{key:"componentWillUnmount",value:function(){this.context.socketDispatcher.unsubscribe(this.socketListener)}},{key:"render",value:function(){return null}}]),e}(r.Component);Q.contextTypes={socketDispatcher:z.a.instanceOf(V)};var $=Q,Z=function(t){var e,n;return n=e=function(e){function n(t,e){var r;return Object(B.a)(this,n),(r=Object(H.a)(this,Object(_.a)(n).call(this,t,e))).state={readyState:window.WebSocket.CLOSED},r.socketListener=r.socketListener.bind(Object(Y.a)(r)),r}return Object(F.a)(n,e),Object(W.a)(n,[{key:"socketListener",value:function(t){switch(t.type){case G.OPEN:this.setState((function(t){return Object(O.a)({},t,{readyState:window.WebSocket.OPEN})}));break;case G.CLOSE:this.setState((function(t){return Object(O.a)({},t,{readyState:window.WebSocket.CLOSED})}))}}},{key:"componentDidMount",value:function(){this.context.socketDispatcher.subscribe(this.socketListener)}},{key:"componentWillUnmount",value:function(){this.context.socketDispatcher.unsubscribe(this.socketListener)}},{key:"render",value:function(){return o.a.createElement(t,Object.assign({},this.props,{socketDispatcher:this.context.socketDispatcher,readyState:this.state.readyState}))}}]),n}(r.Component),e.contextTypes={socketDispatcher:z.a.instanceOf(V)},n},tt=n(117),et=n(118),nt=n.n(et),rt=function(t){return{type:"CONNECTION_SUCCESS",payload:{token:t}}},ot=function(t){return{type:"CONNECTION_CLOSED"}},it=n(128),at=function(t,e){return Object(C.z)((n=t,function(t){return Object(C.k)(Object(C.w)(t),(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.apply(void 0,Object(it.a)(Object(C.c)(n,-1,r)))}))}),e);var n},ct=at(C.F(["connection"]),{getConnectionIsReady:function(t){return t.connected&&t.manifestLoaded},getToken:function(t){return C.K(null,"token",t)}}),st=function(t){return{payload:t,type:"INCREASE_ARTBOARD_REVISION"}},ut=n(40),lt=new ut.schema.Entity("layers",{},{idAttribute:function(t,e,n){return"".concat(e.id,"-").concat(t.id,"-").concat(e[n].indexOf(t))},processStrategy:function(t,e,n){return C.N(C.y("id"),"".concat(e.id,"-").concat(t.id,"-").concat(e[n].indexOf(t)),t)}}),dt=new ut.schema.Entity("artboards",{layers:[lt]}),ft=new ut.schema.Entity("pages",{artboards:[dt]}),ht=new ut.schema.Entity("documents",{pages:[ft]},{idAttribute:function(t){return t.manifest.id},processStrategy:function(t,e,n){var r=C.G([],["manifest","contents","pages"],t);return{flowColor:C.G(null,["manifest","flowColor"],t),pages:r}}}),bt=function(t){return{type:"UPDATE_MANIFEST",payload:{manifest:t},meta:{schema:ht}}},pt=n(78),mt=n.n(pt),vt={edge:"Edge",chrome:"Chrome",crios:"Chrome iOS",firefox:"Firefox",opera:"Opera",ie:"Internet Explorer",android:"Android",ios:"iOS",safari:"Safari"},gt=function(){return t=mt.a?mt.a.name:"Unknown",C.K(t,t,vt);var t},Ot=function(t){function e(){var t,n;Object(B.a)(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(H.a)(this,(t=Object(_.a)(e)).call.apply(t,[this].concat(o)))).initConnection=function(){var t=localStorage.getItem("uuid");t||(t=Object(tt.v4)(),localStorage.setItem("uuid",t)),n.setState({uuid:t})},n.sendDeviceInfo=function(){var t=n.props.socketDispatcher,e={type:"device-info",content:{uuid:n.state.uuid,"user-agent":window.navigator.userAgent,"display-name":gt(),challenge:nt.a.parse(window.location.search).challenge,screens:[{name:"Browser",scale:window.devicePixelRatio,width:window.screen.width,height:window.screen.height}]}};t.send(JSON.stringify(e))},n.connect=function(){n.props.connected||n.props.socketDispatcher.connect()},n.handleOpen=function(){n.sendDeviceInfo()},n.handleClose=function(){n.props.closeConnection(),setTimeout(n.connect,5e3)},n.handleError=function(){n.props.handleError()},n.handleManifestUpdate=function(t){n.props.updateManifest(t.content)},n.handleArtboardUpdate=function(t){C.t(t.content.identifier)||n.props.updateArtboard(t.content.identifier)},n.handleConnectionSuccess=function(t){n.props.connectionSuccess(t.content.token)},n.handleUpdateCurrentArtboard=function(t){C.t(t.content.identifier)||n.props.updateCurrentArtboard(t.content.identifier)},n}return Object(F.a)(e,t),Object(W.a)(e,[{key:"componentDidMount",value:function(){this.initConnection()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement($,{onOpen:this.handleOpen}),o.a.createElement($,{onClose:this.handleClose}),o.a.createElement($,{onError:this.handleError}),o.a.createElement($,{event:"connected",handler:this.handleConnectionSuccess}),o.a.createElement($,{event:"manifest",handler:this.handleManifestUpdate}),o.a.createElement($,{event:"artboard",handler:this.handleArtboardUpdate}),!1)}}]),e}(r.Component),yt=C.i(Z,Object(c.b)((function(t){return{connected:t.connection.connected}}),(function(t,e){return{connectionSuccess:function(e){return t(rt(e))},updateManifest:function(e){return t(bt(e))},updateArtboard:function(e){return t(st(e))},updateCurrentArtboard:function(e){return t(k(e))},closeConnection:function(){t(ot())}}})))(Ot),wt=n(54),kt=n(46),Et=n(9),St=n(15),jt=n(10),At=n(249),Rt=n(55);function Ct(){var t=Object(Et.a)(["\n  position: absolute;\n  border-radius: ",";\n  display: block;\n  opacity: ",";\n  transition: opacity 0.25s;\n  cursor: pointer;\n  box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.15);\n  pointer-events: auto;\n\n  &::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: 2px solid ",";\n    border-radius: ",";\n  }\n"]);return Ct=function(){return t},t}var Tt=jt.a.div.attrs({style:function(t){return{width:t.width,height:t.height,top:t.top||"initial",right:t.right||"initial",bottom:t.bottom||"initial",left:t.left||"initial",backgroundColor:Object(Rt.b)(.8,t.color||"#00fffc")}}})(Ct(),"1px",(function(t){return t.isActive?"1":"0"}),(function(t){return t.color||"#00fffc"}),"1px");Tt.propTypes={color:z.a.string},Tt.defaultProps={color:"#00fffc"};var It=Tt,xt=n(29),Dt=C.F(["entities","layers"]),Nt=function(t,e){return e.byId[t]},Lt=function(t,e){return C.G(null,["flow","destinationArtboardID"],Nt(t,e))},Pt=at(Dt,{getLayer:Nt,getDestinationArtboardId:Lt}),Mt=at(C.F(["hitAreas"]),{getColor:function(t){return C.K(null,"color",t)}}),Bt=at(C.F(["screen"]),{getScalingMode:function(t){return t.scalingMode},getIsScrollbarDimensionsSet:function(t){return null!==t.scrollbarDimensions},getScrollbarDimensions:function(t){return t.scrollbarDimensions},getShouldHideScrollbars:function(t){return!!t.scrollbarDimensions.width||!!t.scrollbarDimensions.height},getCanGoBack:function(t){return t.canGoBack}}),Wt=C.b(C.z),Ht=C.i(C.h(0,255),Math.floor,C.B(255)),_t=Wt((function(t,e){return 3===e?t:Ht(t)})),Ft=C.e([C.i(C.C,C.t),C.R({0:C.s(Number),1:C.s(Number),2:C.s(Number),3:C.s(Number)}),Array.isArray,C.J("length",4)]),Ut=C.q(Ft,C.i(C.g(Rt.a),_t),C.f(null)),zt=function(t){return t+"px"},Gt=Object(xt.createSelector)((function(t,e){return Pt.getLayer(e.layerId,t)}),(function(t,e){return e.scale}),(function(t){return Mt.getColor(t)}),(function(t){return Bt.getCanGoBack(t)}),(function(t,e,n,r){return{flow:t.flow,width:zt(Math.ceil(t.boundingRect.width*e)),height:zt(Math.ceil(t.boundingRect.height*e)),top:zt(t.boundingRect.y*e),left:zt(t.boundingRect.x*e),color:Ut(n),canGoBack:r}})),Vt=function(t,e){return function(n,r,o){t(Object(u.d)({pathname:"/".concat(n),state:{transitionType:r,fromArtboardId:e.match.params.artboardId,toArtboardId:n,keepParentScrollPosition:o}}))}},Kt=function(t){return t.stopPropagation()},Xt=C.i(Object(St.f)((function(){return{onMouseDown:Kt,onTouchStart:Kt}})),Object(St.e)({onClick:function(t){var e=t.flow,n=t.goToArtboard,r=t.goToPreviousArtboard,o=t.keepParentScrollPosition;return function(t){t.stopPropagation(),e.isBackAction?r():e.destinationArtboardID&&n(e.destinationArtboardID,e.animationType,o)}}}),Object(St.a)((function(t){var e=t.flow,n=t.canGoBack;return e&&e.isBackAction&&!n}),St.c)),Yt=C.i(At.a,Object(c.b)(Gt,(function(t,e){return{goToArtboard:Vt(t,e),goToPreviousArtboard:function(){t(Object(u.c)())}}})),Xt)(It),qt=C.F(["entities","artboards"]),Jt=function(t,e){return C.G(null,["byId",t],e)},Qt=function(t,e){return C.K([],"layers",Jt(t,e))},$t=at(qt,{getArtboards:function(t){var e=C.G({},["byId"],t);return C.Q(e)},getArtboard:Jt,getLayers:Qt,getViewport:function(t,e){return C.K({width:null,height:null},"viewport",Jt(t,e))},getArtboardFileTypes:function(t,e){var n=Jt(t,e);return C.K(["full"],"files",n)}}),Zt=Object(xt.createSelector)((function(t,e){return e.match.params.artboardId}),(function(t){return t.entities.artboards}),(function(t){return t.entities.layers}),(function(t,e,n){var r=Qt(t,e).map((function(t){return Lt(t,n)})).filter((function(t){return t}));return C.P(r)})),te=Object(xt.createSelector)((function(t,e){return $t.getArtboard(e.match.params.artboardId,t)}),(function(t){return t.entities.layers}),(function(t,e){return t?t.layers.map((function(t){return Nt(t,e)})):[]})),ee=parseInt(window.location.port,10),ne={socketUri:"ws://127.0.0.1:".concat(ee+1),fileServerUri:"http://127.0.0.1:".concat(ee)},re=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"full";return"".concat(ne.fileServerUri,"/artboards/").concat(t,"?scale=").concat(n,"&token=").concat(e,"&v=").concat(r,"&type=").concat(o)},oe=at(C.F(["revisions"]),{getArtboardRevision:function(t,e){return e.artboards[t]}}),ie=Object(xt.createSelector)((function(t){return t.connection.token}),(function(t,e){return e.artboardId}),(function(t,e){return oe.getArtboardRevision(e.artboardId,t)}),(function(t,e){return $t.getArtboardFileTypes(e.artboardId,t)}),(function(t,e,n,r){return r.reduce((function(r,o){return r[o]=C.z((function(r){return re(e,t,r,n,o)}),C.L(1,4)),r}),{})})),ae=n(247),ce=n(248);function se(){var t=Object(Et.a)(["\n  transition-duration: 400ms;\n  transition-property: transform;\n  perspective: 1000;\n\n  /* none */\n\n  &.none-enter {\n    z-index: 20;\n    transform: translate(0, 0);\n  }\n\n  /* fromRight */\n\n  &.fromRight-enter {\n    transform: translateX(100%);\n    z-index: 50;\n  }\n\n  &.fromRight-enter-active {\n    transform: translateX(0);\n  }\n\n  &.fromRight-enter-done {\n    transition: none;\n  }\n\n  &.fromRight-exit {\n  }\n\n  &.fromRight-exit-active {\n    transform: translateX(-30%);\n  }\n\n  /* fromRightReverse */\n\n  &.fromRightReverse-enter {\n    transform: translateX(-30%);\n  }\n\n  &.fromRightReverse-enter-active {\n    transform: translateX(0);\n  }\n\n  &.fromRightReverse-enter-done {\n    transition: none;\n  }\n\n  &.fromRightReverse-exit {\n    z-index: 50;\n  }\n\n  &.fromRightReverse-exit-active {\n    transform: translateX(100%);\n  }\n\n  /* fromLeft */\n\n  &.fromLeft-enter {\n    transform: translateX(-100%);\n    z-index: 50;\n  }\n\n  &.fromLeft-enter-active {\n    transform: translateX(0);\n  }\n\n  &.fromLeft-enter-done {\n    transition: none;\n  }\n\n  &.fromLeft-exit {\n  }\n\n  &.fromLeft-exit-active {\n    transform: translateX(30%);\n  }\n\n  /* fromLeftReverse */\n\n  &.fromLeftReverse-enter {\n    transform: translateX(30%);\n  }\n\n  &.fromLeftReverse-enter-active {\n    transform: translateX(0);\n  }\n\n  &.fromLeftReverse-enter-done {\n    transition: none;\n  }\n\n  &.fromLeftReverse-exit {\n    z-index: 50;\n  }\n\n  &.fromLeftReverse-exit-active {\n    transform: translateX(-100%);\n  }\n\n  /* fromTop */\n\n  &.fromTop-enter {\n    transform: translateY(-100%);\n    z-index: 50;\n  }\n\n  &.fromTop-enter-active {\n    transform: translateY(0);\n  }\n\n  &.fromTop-enter-done {\n    transition: none;\n  }\n\n  &.fromTop-exit {\n  }\n\n  &.fromTop-exit-active {\n  }\n\n  /* fromTopReverse */\n\n  &.fromTopReverse-enter {\n  }\n\n  &.fromTopReverse-enter-active {\n  }\n\n  &.fromTopReverse-enter-done {\n    transition: none;\n  }\n\n  &.fromTopReverse-exit {\n    transform: translateY(0);\n    z-index: 50;\n  }\n\n  &.fromTopReverse-exit-active {\n    transform: translateY(-100%);\n  }\n\n  /* fromBottom */\n\n  &.fromBottom-enter {\n    transform: translateY(100%);\n    z-index: 50;\n  }\n\n  &.fromBottom-enter-active {\n    transform: translateY(0);\n  }\n\n  &.fromBottom-enter-done {\n    transition: none;\n  }\n\n  &.fromBottom-exit {\n  }\n\n  &.fromBottom-exit-active {\n  }\n\n  /* fromBottomReverse */\n\n  &.fromBottomReverse-enter {\n  }\n\n  &.fromBottomReverse-enter-active {\n  }\n\n  &.fromBottomReverse-enter-done {\n    transition: none;\n  }\n\n  &.fromBottomReverse-exit {\n    transform: translateY(0);\n    z-index: 50;\n  }\n\n  &.fromBottomReverse-exit-active {\n    transform: translateY(100%);\n  }\n"]);return se=function(){return t},t}function ue(){var t=Object(Et.a)(["\n  position: absolute;\n  width: 100%;\n  top: 0;\n  left: 0;\n"]);return ue=function(){return t},t}var le=jt.a.div(ue()),de=Object(jt.a)(ae.a)(se()),fe=function(t){function e(){return Object(B.a)(this,e),Object(H.a)(this,Object(_.a)(e).apply(this,arguments))}return Object(F.a)(e,t),Object(W.a)(e,[{key:"render",value:function(){var t=this.props,e=t.transition,n=t.transitionKey,r=t.children;return o.a.createElement(ce.a,{childFactory:function(t){return o.a.cloneElement(t,{classNames:e})}},o.a.createElement(de,{key:n,timeout:400,classNames:e},o.a.createElement(le,null,r)))}}]),e}(r.PureComponent),he=function(t,e){for(var n in t)if(!(n in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1},be=function(t){return"none"===t},pe=C.D(["children"]),me={fromRight:"fromRightReverse",fromLeft:"fromLeftReverse",fromTop:"fromTopReverse",fromBottom:"fromBottomReverse",none:"none"},ve=function(t){function e(){var t,n;Object(B.a)(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(H.a)(this,(t=Object(_.a)(e)).call.apply(t,[this].concat(o)))).state={previousTransition:"none"},n.updatePreviousTransition=function(t){he(pe(t),pe(n.props))&&n.setState({previousTransition:n.transition})},n}return Object(F.a)(e,t),Object(W.a)(e,[{key:"componentWillReceiveProps",value:function(t){this.updatePreviousTransition(t)}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.location,r=t.isBack,i=this.state.previousTransition;return o.a.createElement(fe,{transitionKey:C.d(be,[i,this.transition])&&!i?0:n.key,transition:r?me[i]:this.transition},e)}},{key:"transition",get:function(){return C.G("none",["state","transitionType"],this.props.location)}}]),e}(r.Component);function ge(){var t=Object(Et.a)(["\n  position: relative;\n  overflow: hidden;\n  width: ","px;\n  height: ","px;\n"]);return ge=function(){return t},t}var Oe=jt.a.div(ge(),(function(t){return t.width}),(function(t){return t.height})),ye=function(t){var e=t.width,n=t.height,r=t.children;return o.a.createElement(Oe,{width:e,height:n},r)};function we(){var t=Object(Et.a)(["\n  width: ","px;\n  height: ","px;\n  position: relative;\n  overflow: hidden;\n"]);return we=function(){return t},t}function ke(){var t=Object(Et.a)(["\n  width: ","px;\n  height: ","px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n  z-index: 1;\n  overflow: hidden;\n"]);return ke=function(){return t},t}function Ee(){var t=Object(Et.a)(["\n  width: ","px;\n  height: ","px;\n  overflow: auto;\n  position: relative;\n  -webkit-overflow-scrolling: touch;\n  overflow-scrolling: touch;\n  ",";\n"]);return Ee=function(){return t},t}function Se(){var t=Object(Et.a)(["\n  position: relative;\n  width: ","px;\n  height: ","px;\n  overflow: hidden;\n  /*\n    If the prototype doesn't have any background colour it should\n    default to white, like in the mac app\n    https://github.com/sketch-hq/Cloud/issues/1717#issuecomment-585618001\n   */\n  background-color: ",";\n"]);return Se=function(){return t},t}var je=jt.a.div(Se(),(function(t){return t.width}),(function(t){return t.height}),(function(t){return t.backgroundColor||"#fff"})),Ae=jt.a.div(Ee(),(function(t){return t.width}),(function(t){return t.height}),(function(t){return t.hideScrollbars&&"&::-webkit-scrollbar {\n    display: none;\n  }"})),Re=jt.a.div(ke(),(function(t){return t.width}),(function(t){return t.height})),Ce=jt.a.div(we(),(function(t){return t.width}),(function(t){return t.height})),Te=function(t){var e=t.viewportWidth,n=t.viewportHeight,r=t.contentsWidth,i=t.contentsHeight,a=t.scrollbarWidth,c=t.scrollbarHeight,s=t.hideScrollbarsOnWebkit,u=t.children,l=t.fixedChildren,d=t.backgroundColor,f=t.scrollContainerRef,h=Object(wt.a)(t,["viewportWidth","viewportHeight","contentsWidth","contentsHeight","scrollbarWidth","scrollbarHeight","hideScrollbarsOnWebkit","children","fixedChildren","backgroundColor","scrollContainerRef"]),b=i>n?e+a:e,p=r>e?n+c:n;return o.a.createElement(je,Object.assign({width:b,height:p,backgroundColor:d},h),o.a.createElement(Re,{width:e,height:n},l),o.a.createElement(Ae,{innerRef:f,hideScrollbars:s,width:b,height:p},o.a.createElement(Ce,{width:r,height:i},u)))};Te.defaultProps={hideScrollbarsOnWebkit:!1,scrollbarWidth:0,scrollbarHeight:0,backgroundColor:"#fff"};var Ie=Te,xe=function(t){return Object(At.a)(function(e){function n(){var t,e;Object(B.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=Object(H.a)(this,(t=Object(_.a)(n)).call.apply(t,[this].concat(o)))).state={isBack:!1,backFrom:null},e.historySinceEnter=[],e}return Object(F.a)(n,e),Object(W.a)(n,[{key:"componentDidMount",value:function(){this.historySinceEnter.push(this.props.location)}},{key:"componentWillReceiveProps",value:function(t){var e,n=this.props.location;if(t.location.key!==n.key){var r=!1,o=null;switch(t.history.action){case"PUSH":this.historySinceEnter.push(t.location),r=!!(null===(e=t.location.state)||void 0===e?void 0:e.isBackAction);break;case"POP":var i=this.historySinceEnter.length-1,a=this.historySinceEnter[i-1];(null===a||void 0===a?void 0:a.key)===t.location.key?(o=this.historySinceEnter.pop(),r=!0):this.historySinceEnter.push(t.location);break;case"REPLACE":this.historySinceEnter.pop(),this.historySinceEnter.push(t.location)}this.setState({isBack:r,backFrom:o})}}},{key:"render",value:function(){return o.a.createElement(t,Object.assign({isBack:this.state.isBack,backFrom:this.state.backFrom,prototypeHistory:this.historySinceEnter},this.props))}}]),n}(r.Component))},De=n(121),Ne=n(123),Le=n.n(Ne),Pe=n(124),Me=n.n(Pe);function Be(){var t=Object(Et.a)(["\n  margin-bottom: 0.9375rem;\n  user-select: none;\n"]);return Be=function(){return t},t}function We(){var t=Object(Et.a)(["\n  font-size: 0.6875rem;\n  opacity: 0.8;\n  max-width: 170px;\n  margin: 0;\n  user-select: none;\n"]);return We=function(){return t},t}function He(){var t=Object(Et.a)(["\n  font-size: 0.6875rem;\n  margin: 0;\n  user-select: none;\n"]);return He=function(){return t},t}function _e(){var t=Object(Et.a)(["\n  color: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  line-height: 1.5;\n  width: ",";\n  height: ",";\n"]);return _e=function(){return t},t}var Fe=jt.a.div(_e(),(function(t){return t.width}),(function(t){return t.height})),Ue=jt.a.h1(He()),ze=jt.a.p(We()),Ge=jt.a.img(Be()),Ve=function(t){switch(t.type){case"warn":return o.a.createElement(Ge,{src:Me.a,alt:"Warning"});case"artboard":default:return o.a.createElement(Ge,{src:Le.a,alt:"Artboard"})}},Ke=function(t){var e=t.title,n=t.message,r=t.width,i=t.height,a=t.iconType;return o.a.createElement(Fe,{width:r,height:i},o.a.createElement(Ve,{type:a}),o.a.createElement(Ue,null,e),o.a.createElement(ze,null,n))},Xe=function(){return window.navigator.userAgent.toLowerCase().includes("sketch")},Ye=function(t){return t.map((function(t,e){return"".concat(t," ").concat(e+1,"x")}),"").join(", ")},qe=function(){},Je=function(t){function e(){return Object(B.a)(this,e),Object(H.a)(this,Object(_.a)(e).apply(this,arguments))}return Object(F.a)(e,t),Object(W.a)(e,[{key:"componentDidMount",value:function(){var t=this;window.previewFrontend.transitionToArtboard=function(e,n){return t.props.goToArtboard(e,n)}}},{key:"componentWillUnmount",value:function(){window.previewFrontend.transitionToArtboard=qe}},{key:"render",value:function(){return null}}]),e}(r.Component),Qe=C.i(At.a,Object(c.b)(null,(function(t,e){return{goToArtboard:Vt(t,e)}})))(Je),$e=function(t){var e=t.src,n=t.srcSet;return new Promise((function(t,r){var o=new window.Image;o.addEventListener("load",(function(e){t(e)})),o.addEventListener("error",(function(t){r(t),o=null})),o.src=e,n&&(o.srcset=n)}))},Ze=function(t){function e(){return Object(B.a)(this,e),Object(H.a)(this,Object(_.a)(e).apply(this,arguments))}return Object(F.a)(e,t),Object(W.a)(e,[{key:"fetchImage",value:function(t){this.promise=$e({src:t.src,srcSet:t.srcSet})}},{key:"componentDidMount",value:function(){this.fetchImage(this.props)}},{key:"render",value:function(){return null}}]),e}(r.Component),tn=Object(c.b)((function(t,e){return{urls:ie(t,e)}}))((function(t){var e=t.urls;return[e.full,e.scrollable,e.fixed].filter((function(t){return t&&t.length})).map((function(t){return o.a.createElement(Ze,{key:t[0],src:t[0],srcSet:Ye(t)})}))})),en=n(45),nn=n.n(en);function rn(){var t=Object(Et.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  max-width: 100vw;\n  max-height: 100vh;\n  background-color: ",";\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return rn=function(){return t},t}var on=Object(St.d)(jt.a.div(rn(),"#000"));function an(t,e){var n=Object(kt.a)(t,2),r=n[0],o=n[1],i=Object(kt.a)(e,2),a=i[0],c=i[1];return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return C.o(C.O((function(t,e){return t-e}),e))}(r<a?r/a:1,o<c?o/c:1)}var cn=Object(St.b)(Object(St.g)("hitAreasAreActive","setHitAreasAreActive",!1),Object(St.e)({flashHitareas:function(t){var e=t.setHitAreasAreActive,n=t.hitAreasAreActive;return function(){n||(e(!0),setTimeout((function(){e(!1)}),500))}}}),xe,At.a,Object(St.f)((function(t){return{isSketchWebView:Xe(),artboardId:C.G(null,["match","params","artboardId"],t)}})),Object(c.b)((function(t,e){var n=e.match.params.artboardId,r=$t.getArtboard(n,t),o=$t.getViewport(n,t);return{artboard:r,layers:te(t,e),viewportWidth:C.I("width",o),viewportHeight:C.I("height",o),shouldHideScrollbars:Bt.getShouldHideScrollbars(t),scrollbarDimensions:Bt.getScrollbarDimensions(t),artboardUrls:ie(t,e),relatedArtboardIds:Zt(t,e)}}),(function(t){return{setCurrentArtboard:function(e){return t(k(e))}}})),Object(De.a)())((function(t){var e,n=t.viewportWidth,i=t.viewportHeight,a=t.artboard,c=t.flashHitareas,s=t.hitAreasAreActive,u=t.setHitAreasAreActive,l=t.layers,d=(t.match,t.location),f=t.measureRef,h=t.contentRect,b=t.shouldHideScrollbars,p=t.scrollbarDimensions,m=(t.scrollableArtboardUrls,t.fixedViewportUrls,t.artboardUrls),v=t.relatedArtboardIds,g=t.prototypeHistory,O=t.backFrom,y=t.isBack,w=Object(wt.a)(t,["viewportWidth","viewportHeight","artboard","flashHitareas","hitAreasAreActive","setHitAreasAreActive","layers","match","location","measureRef","contentRect","shouldHideScrollbars","scrollbarDimensions","scrollableArtboardUrls","fixedViewportUrls","artboardUrls","relatedArtboardIds","prototypeHistory","backFrom","isBack"]),k=Object(r.useRef)({}),E=Object(r.useRef)({}),S=g.slice(-1)[0];Object(r.useEffect)((function(){var t,e=d.key,n=k.current[e],r=E.current[e]||0;if(null===(t=d.state)||void 0===t?void 0:t.keepParentScrollPosition){var o=g.slice(-2),i=Object(kt.a)(o,1)[0];(null===i||void 0===i?void 0:i.key)&&(r=E.current[d.key]||E.current[i.key])}n&&n.scrollTo(0,(null===O||void 0===O?void 0:O.state.keepParentScrollPosition)?E.current[O.key]:r)}),[d,g,O]),Object(r.useEffect)((function(){var t=d.key,e=k.current,n=E.current;return function(){var r;n[t]=null===(r=e[t])||void 0===r?void 0:r.scrollTop}}),[d]),Object(r.useEffect)((function(){var e,n,r=t.viewportWidth,o=t.viewportHeight,i=t.setCurrentArtboard,a=(null===t||void 0===t?void 0:null===(e=t.match)||void 0===e?void 0:null===(n=e.params)||void 0===n?void 0:n.artboardId)||null;r&&o||!a||i(a)}),[]);var j=null===(e=t.artboard)||void 0===e?void 0:e.id;if(Object(r.useEffect)((function(){Xe()&&window.webkit.messageHandlers.artboardDidChange.postMessage(j)}),[j]),!a)return o.a.createElement(Ke,{width:"100vw",height:"100vh",title:"Artboard not found",message:"Select an Artboard to preview.",iconType:"artboard"});var A=an([h.entry.width||window.innerWidth,h.entry.height||window.innerHeight],[n,i]),R=function(t){var e=t.scale,n=t.viewportWidth,r=t.viewportHeight,o=t.isSketchWebView,i=t.scrollbarDimensions,a=C.q((function(){return!o}),C.S(C.a,[i.width,i.height]),C.p);return C.H(C.z(C.H(C.B(e),Math.floor)),a)([n,r])}({scale:A,viewportWidth:n,viewportHeight:i,isSketchWebView:Xe,scrollbarDimensions:p}),T=Object(kt.a)(R,2),I=T[0],x=T[1];return o.a.createElement(on,Object.assign({innerRef:f,onMouseDown:c},w),v.map((function(t){return o.a.createElement(tn,{key:t,artboardId:t})})),o.a.createElement(nn.a,{keyEventName:en.KEYDOWN,keyValue:"Shift",onKeyHandle:function(){return u(!0)}}),o.a.createElement(nn.a,{keyEventName:en.KEYUP,keyValue:"Shift",onKeyHandle:function(){return u(!1)}}),o.a.createElement(Qe,null),o.a.createElement(ye,{width:I,height:x},o.a.createElement(ve,{isBack:y,location:d},o.a.createElement(Ie,{scrollContainerRef:function(t){t&&(k.current[d.key]=t)},scrollbarWidth:p.width,scrollbarHeight:p.height,hideScrollbarsOnWebkit:b,viewportWidth:I,viewportHeight:x,contentsWidth:Math.floor(a.width*A),contentsHeight:Math.floor(a.height*A),backgroundColor:Ut(a.backgroundColor)||"#fff",fixedChildren:o.a.createElement(o.a.Fragment,null,m.fixed&&o.a.createElement("img",{src:m.fixed[0],srcSet:Ye(m.fixed),style:{width:"100%"},draggable:!1,alt:""}),!!l.filter((function(t){return t.isFixedToViewport})).length&&l.filter((function(t){return t.isFixedToViewport})).map((function(t){return o.a.createElement(Yt,{key:t.id,layerId:t.id,isActive:s,previousLocation:S,keepParentScrollPosition:t.flow.maintainScrollPosition||t.flow.isBackAction,scale:A})})))},l.filter((function(t){return!t.isFixedToViewport})).map((function(t){return o.a.createElement(Yt,{key:t.id,layerId:t.id,isActive:s,previousLocation:S,keepParentScrollPosition:t.flow.maintainScrollPosition||t.flow.isBackAction,scale:A})})),m.scrollable||m.full?o.a.createElement("img",{src:m.scrollable?m.scrollable[0]:m.full[0],srcSet:Ye(m.scrollable||m.full),style:{width:"100%"},draggable:!1,alt:""}):null))))})),sn=n(250),un=n(245),ln=n(125),dn=n.n(ln),fn=function(t){return{type:"SET_SCROLLBAR_DIMENSIONS",payload:t}},hn=at(C.F(["manifest"]),{getManifestIsSet:function(t){return t.manifestIsSet}}),bn={NO_ARTBOARDS_TITLE:"No Artboards",NO_ARTBOARDS_MESSAGE:"Artboards are required in order to preview your designs.",CONNECTION_ERROR_TITLE:"Connection Error",CONNECTION_ERROR_MESSAGE:"Error establishing connection"},pn=o.a.createContext(),mn=function(t){function e(){var t,n;Object(B.a)(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(H.a)(this,(t=Object(_.a)(e)).call.apply(t,[this].concat(o)))).state={localizedStrings:bn},n}return Object(F.a)(e,t),Object(W.a)(e,[{key:"componentDidMount",value:function(){var t=this;window.previewFrontend.setLocalizedStrings=function(e){t.setState((function(t){return Object(O.a)({},t,{localizedStrings:C.A(t.localizedStrings,e)})}))}}},{key:"render",value:function(){return o.a.createElement(pn.Provider,{value:this.state},this.props.children)}}]),e}(r.Component),vn=pn.Consumer;var gn=function(t){return function(e){return o.a.createElement(vn,null,(function(n){var r=n.localizedStrings;return o.a.createElement(t,Object.assign({},e,{localizedStrings:r}))}))}},On=function(t,e){return C.n(e,t)||console.warn("No localized string found for ".concat(e)),C.I(e,t)},yn=C.i(gn,Object(St.f)((function(t){var e=t.localizedStrings;return{title:On(e,"NO_ARTBOARDS_TITLE"),message:On(e,"NO_ARTBOARDS_MESSAGE"),iconType:"artboard"}})))(Ke),wn=C.i(gn,Object(St.f)((function(t){var e=t.localizedStrings;return{title:On(e,"CONNECTION_ERROR_TITLE"),message:On(e,"CONNECTION_ERROR_MESSAGE"),iconType:"warn"}})))(Ke),kn=function(t){function e(){return Object(B.a)(this,e),Object(H.a)(this,Object(_.a)(e).apply(this,arguments))}return Object(F.a)(e,t),Object(W.a)(e,[{key:"render",value:function(){var t=this.props,e=t.connectionIsReady,n=t.setScrollbarDimensions,r=t.isScrollbarDimensionsSet,i=t.goToConnectionError,a=t.manifestIsSet,c=t.documentContainsArtboards;return o.a.createElement(mn,null,o.a.createElement(X,{uri:ne.socketUri},o.a.createElement("div",null,o.a.createElement(yt,{handleError:i}),o.a.createElement(dn.a,{onLoad:n}),e?r&&a&&o.a.createElement(sn.a,null,c&&o.a.createElement(un.a,{path:"/:artboardId",component:cn}),o.a.createElement(un.a,{render:function(){return o.a.createElement(yn,{width:"100vw",height:"100vh"})}})):o.a.createElement(sn.a,null,o.a.createElement(un.a,{path:"/state/connection-error",render:function(){return o.a.createElement(wn,{width:"100vw",height:"100vh"})}})))))}}]),e}(r.Component),En=Object(At.a)(Object(c.b)((function(t,e){return{connectionIsReady:ct.getConnectionIsReady(t),isScrollbarDimensionsSet:Bt.getIsScrollbarDimensionsSet(t),manifestIsSet:hn.getManifestIsSet(t),documentContainsArtboards:$t.getArtboards(t).length>0}}),(function(t){return{setScrollbarDimensions:function(e){return t(fn({width:e.scrollbarWidth,height:e.scrollbarHeight}))},goToConnectionError:function(){return t(Object(u.e)("/state/connection-error"))}}}))(kn));function Sn(){var t=Object(Et.a)(["\n  body {\n    overflow: hidden; // block body scrolling\n    background-color: #000;\n    color: #fff;\n    font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;\n    -webkit-font-smoothing: antialiased;\n    margin: 0;\n  }\n"]);return Sn=function(){return t},t}Object(jt.b)(Sn());var jn=n(126),An=n.n(jn);window.__RELEASE_INFO={commit:"ee9ff7f33741f53ccb6e017cd50e75176be28ac6"};var Rn=function(){return window.history.state||{}};if(!Rn().key){var Cn=Object.assign({},Rn(),{key:Math.random().toString(36).substr(2,6)});window.history.replaceState(Cn,null,window.location.href)}var Tn,In=Object(s.a)(),xn=function(t){var e=t.history,n=M(Object(h.applyMiddleware)(b.a,m()(),Object(u.f)(e)));return Object(h.createStore)(P,n)}({history:In});Tn=xn,window.previewFrontend={goToArtboard:function(t){return An.a.anyNonNil(t)&&Tn.dispatch(k(t))},getSessionId:function(){return window.localStorage.getItem("uuid")},setLocalizedStrings:function(t){console.warn("LocalizedStringProvider isn't initialized")},transitionToArtboard:function(){console.warn("AddGlobalTransitionToArtboardHandler isn't initialized")}},a.a.render(o.a.createElement(c.a,{store:xn},o.a.createElement(u.a,{history:In},o.a.createElement(En,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[131,1,2]]]);
//# sourceMappingURL=main.14b14679.chunk.js.map